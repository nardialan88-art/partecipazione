<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Partecipazione A&A</title>
<style>
  /* ---------- Layout generale ---------- */
  :root{
    --max-w: 829px;
    --aspect: 829/1200;
    --open-deg: 180deg; /* rotazione completa */
  }
  html,body{height:100%;margin:0}
  body{
    display:flex;
    align-items:center;
    justify-content:center;
    background:#000;
    height:100vh;
    overflow:hidden;
    -webkit-font-smoothing:antialiased;
    font-family:serif;
  }

  /* contenitore principale responsive */
  #invito{
    width: min(95vw, var(--max-w));
    aspect-ratio: var(--aspect);
    position:relative;
    perspective:2000px;
    transform-style:preserve-3d;
  }

  /* sfondo centrale (fisso) */
  .sfondo{
    position:absolute;
    inset:0;
    background-image: url("partecipazione matrimonio.jpeg");
    background-size: cover;
    background-position: center;
    border-radius:10px;
    z-index:1;
    box-shadow: 0 20px 50px rgba(0,0,0,0.6);
  }

  /* ante */
  .anta.sinistra, .anta.destra {
    position: absolute;
    top: 0;
    height: 100%;
    transition: transform 2s ease-in-out;
    transform-style: preserve-3d;
    backface-visibility: visible;
    z-index: 2;
  }

  /* ANTA SINISTRA */
.anta.sinistra {
  position: absolute;
  left: 0;
  top: 0;
  width: 50%;
  height: 100%;
  background-image: url('copertina-sx.jpeg');
  background-size: cover;
  background-position: right;
  transform-origin: left center;
  transition: transform 2s ease-in-out;
  box-shadow: inset -40px 0 60px rgba(0,0,0,0.6);
  z-index: 4;
}

.anta.destra {
  position: absolute;
  right: 0;
  top: 0;
  width: 75%;
  height: 100%;
  background-image: url('copertina-dx.png');
  background-size: cover;
  background-position: left;
  transform-origin: right center;
  transition: transform 2s ease-in-out;
  box-shadow: none;
  z-index: 7;

  /* ðŸ‘‡ Spostamento verso destra */
  transform: translateX(0px);
}

.face {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  transform-style: preserve-3d;
}

.face.back {
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

/* Mostra il retro quando si ruota */
.face.back {
  transform: rotateY(180deg);
}

.face.front img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Stato aperto */
.anta.sinistra.aperta {
  transform: rotateY(-180deg);
}
.anta.destra.aperta {
  transform: rotateY(180deg);
}


  /* stato aperto per singole ante */
  .anta.sinistra.aperta { transform: rotateY(calc(-1 * var(--open-deg))); box-shadow: -30px 0 50px rgba(0,0,0,0.7); z-index:2; }
  .anta.destra.aperta { transform: rotateY(var(--open-deg)); box-shadow: 30px 0 50px rgba(0,0,0,0.7); z-index:2; }

  /* luce centrale che appare quando entrambe aperte */
  #invito.luce::after{
    content:"";
    position:absolute;
    inset:0;
    z-index:2;
    pointer-events:none;
    background: radial-gradient(ellipse at center, rgba(255,255,255,0.12) 0%, rgba(255,255,255,0.03) 30%, transparent 70%);
    transition: opacity .9s ease;
    opacity:1;
  }

  @media (max-width: 100px){
  body {
    overflow-x: auto;   /* permette lo scroll in orizzontale */
    overflow-y: auto;
  }

  #invito {
    width: 1200px;      /* grandezza fissa â†’ NON schiaccia piÃ¹ le ante */
    height: auto;
    margin: 0 auto;
  }

  .anta.sinistra {
    width: 50%;
  }

  .anta.destra {
    width: 75%;
  }

  .sfondo {
    background-size: contain; /* cosÃ¬ non si taglia */
    background-position: center;
  }
}

</style>
</head>
<body>

<div id="invito" aria-label="Invito interattivo">
  <div class="sfondo" role="img" aria-label="sfondo invitazione"></div>

  <!-- ANTA SINISTRA -->
  <div class="anta sinistra" id="antaSx" title="Clicca per aprire/chiudere anta sinistra">
    <div class="face front">
      <img src="copertina-sx.jpeg" alt="Anta sinistra - esterno">
    </div>
    <div class="face back" id="backSx" style='background-image: url("back-sx.jpeg");' aria-hidden="false"></div>
  </div>

  <!-- ANTA DESTRA -->
  <div class="anta destra" id="antaDx" title="Clicca per aprire/chiudere anta destra">
    <div class="face front">
      <img src="copertina-dx.png" alt="Anta destra - esterno (con sigillo)">
    </div>
    <div class="face back" id="backDx" style='background-image: url("back-dx.png");' aria-hidden="false"></div>
  </div>
</div>

<!-- audio: assicurati che i file esistano con gli stessi nomi -->
<audio id="crack" src="ice-break-14765_short.mp3" preload="auto"></audio>
<audio id="soffio" src="soffio_short.mp3" preload="auto"></audio>

<script>
/* ---------- Funzioni audio "sicure" ---------- */
function playSafe(audioEl){
  if(!audioEl) return;
  try{
    const p = audioEl.play();
    if(p && typeof p.then === 'function') p.catch(e => console.warn('audio blocked', e));
  }catch(e){
    console.warn('playSafe error', e);
  }
}

/* ---------- gestione aperture indipendenti ---------- */
const antaSx = document.getElementById('antaSx');
const antaDx = document.getElementById('antaDx');
const invito = document.getElementById('invito');
const crack = document.getElementById('crack');
const soffio = document.getElementById('soffio');

let sxOpen = false;
let dxOpen = false;

antaSx.addEventListener('click', (e)=>{
  e.stopPropagation(); // non far propagare al contenitore
  // piccolo soffio quando apro la sinistra
  playSafe(soffio);
 setTimeout(() => {
    sxOpen = !sxOpen;
    antaSx.classList.toggle('aperta', sxOpen);
    aggiornaLuce();
  }, 50);
});

antaDx.addEventListener('click', (e)=>{
  e.stopPropagation();
  // solo l'anta destra suona "crack" (sigillo) prima di aprirsi
  if (crack){
    crack.currentTime = 0;
    playSafe(crack);
  }
  // apri dopo un piccolo ritardo (0.3s)
  setTimeout(() => {
    dxOpen = !dxOpen;
    antaDx.classList.toggle('aperta', dxOpen);
    // un piccolo soffio quando si Ã¨ aperta
    if (dxOpen) setTimeout(()=> playSafe(soffio), 300);
    aggiornaLuce();
  }, 300);
});

/* click esterno per chiudere entrambe (opzionale):*/
document.addEventListener('click', (e)=>{
  // se clicchi fuori dalle ante, richiudi entrambe (opzionale)
  // qui lasciamo commentata la funzione per non interferire:
  // if (sxOpen || dxOpen) { sxOpen=false; dxOpen=false; antaSx.classList.remove('aperta'); antaDx.classList.remove('aperta'); aggiornaLuce(); }
});

/* aggiorna la "luce" centrale quando entrambe le ante sono aperte */
function aggiornaLuce(){
  if (sxOpen && dxOpen) invito.classList.add('luce');
  else invito.classList.remove('luce');
}

/* debug rapido: se qualcosa non appare, controlla la console del browser */
console.log('Invito caricato â€” assicurati che i file immagine e audio siano nella stessa cartella di index.html');
</script>
</body>
</html>











